{% extends "base.html" %}

{% block title %}Student Dashboard - ExamPortal{% endblock %}

{% block content %}
<style>
    /* Dashboard Specific Styles */
    .dashboard-body {
        background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 50%, #2d2d5f 100%);
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
        padding-top: 2rem;
    }

    /* Floating Particles Background */
    .particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        z-index: 1;
        pointer-events: none;
    }

    .particle {
        position: absolute;
        background: linear-gradient(45deg, #667eea, #764ba2);
        border-radius: 50%;
        animation: float 6s ease-in-out infinite;
    }

    .particle:nth-child(1) { width: 4px; height: 4px; top: 20%; left: 10%; animation-delay: 0s; }
    .particle:nth-child(2) { width: 6px; height: 6px; top: 60%; left: 80%; animation-delay: 1s; }
    .particle:nth-child(3) { width: 3px; height: 3px; top: 80%; left: 20%; animation-delay: 2s; }
    .particle:nth-child(4) { width: 5px; height: 5px; top: 40%; left: 60%; animation-delay: 3s; }
    .particle:nth-child(5) { width: 4px; height: 4px; top: 30%; left: 90%; animation-delay: 4s; }

    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-30px); }
    }

    /* Container */
    .dashboard-container {
        position: relative;
        z-index: 2;
        padding: 0 2rem;
        max-width: 1400px;
        margin: 0 auto;
    }

    /* Welcome Section */
    .welcome-section {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border-radius: 24px;
        padding: 3rem;
        margin-bottom: 3rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
    }

    .welcome-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 24px;
        padding: 2px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: exclude;
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask-composite: exclude;
    }

    .welcome-section h2 {
        font-size: 3rem;
        font-weight: 900;
        background: linear-gradient(135deg, #ffffff 0%, #667eea 50%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1rem;
        text-shadow: 0 0 50px rgba(102, 126, 234, 0.3);
    }

    .welcome-section p {
        color: rgba(255, 255, 255, 0.8);
        font-size: 1.3rem;
        margin-bottom: 0;
    }

    /* Modern Tabs */
    .modern-tabs {
        display: flex;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        padding: 0.5rem;
        margin-bottom: 3rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
        overflow-x: auto;
        gap: 0.5rem;
    }

    .modern-tab {
        flex: 1;
        min-width: 180px;
        padding: 1.2rem 1.5rem;
        border-radius: 16px;
        background: transparent;
        border: none;
        color: rgba(255, 255, 255, 0.7);
        font-weight: 600;
        transition: all 0.4s ease;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.8rem;
        font-size: 1rem;
        position: relative;
        overflow: hidden;
    }

    .modern-tab::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
        transition: left 0.5s;
    }

    .modern-tab:hover::before {
        left: 100%;
    }

    .modern-tab.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        transform: translateY(-2px);
    }

    .modern-tab i {
        font-size: 1.2rem;
    }

    /* Tab Content */
    .tab-content {
        position: relative;
        z-index: 2;
    }

    .tab-pane {
        display: none;
        animation: fadeIn 0.5s ease-in-out;
    }

    .tab-pane.active {
        display: block;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Modern Cards */
    .modern-card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border-radius: 24px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        transition: all 0.4s ease;
        overflow: hidden;
        position: relative;
        margin-bottom: 2rem;
        height: 100%;
    }

    .modern-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
        opacity: 0;
        transition: opacity 0.4s ease;
    }

    .modern-card:hover::before {
        opacity: 1;
    }

    .modern-card:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 30px 60px rgba(102, 126, 234, 0.3);
        border-color: rgba(102, 126, 234, 0.5);
    }

    .modern-card.exam-live {
        border: 2px solid #10b981;
        box-shadow: 0 20px 40px rgba(16, 185, 129, 0.3);
    }

    .modern-card.exam-live::before {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%);
    }

    .card-header {
        padding: 2rem 2rem 1rem 2rem;
        border-bottom: none;
        background: transparent;
    }

    .card-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: white;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.8rem;
    }

    .card-body {
        padding: 0 2rem 1rem 2rem;
        color: rgba(255, 255, 255, 0.8);
    }

    .card-footer {
        padding: 1rem 2rem 2rem 2rem;
        background: transparent;
        border-top: none;
    }

    .exam-meta {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    .exam-meta-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.95rem;
        color: rgba(255, 255, 255, 0.9);
        background: rgba(255, 255, 255, 0.1);
        padding: 0.8rem;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .exam-meta-item i {
        color: #667eea;
        font-size: 1rem;
    }

    /* Status Badges */
    .status-badge {
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border: 1px solid;
    }

    .status-badge.live {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        border-color: #10b981;
        box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
        animation: pulse 2s infinite;
    }

    .status-badge.upcoming {
        background: rgba(255, 193, 7, 0.2);
        color: #ffc107;
        border-color: #ffc107;
    }

    .status-badge.completed {
        background: rgba(16, 185, 129, 0.2);
        color: #10b981;
        border-color: #10b981;
    }

    .status-badge.pending {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
        border-color: #ef4444;
    }

    @keyframes pulse {
        0% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.4); }
        50% { box-shadow: 0 0 30px rgba(16, 185, 129, 0.6); }
        100% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.4); }
    }

    /* Action Buttons */
    .action-btn {
        padding: 1rem 2rem;
        border-radius: 16px;
        font-weight: 600;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.8rem;
        width: 100%;
        font-size: 1rem;
        text-decoration: none;
        position: relative;
        overflow: hidden;
    }

    .action-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.5s;
    }

    .action-btn:hover::before {
        left: 100%;
    }

    .action-btn.start-exam {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4);
    }

    .action-btn.start-exam:hover {
        transform: translateY(-3px);
        box-shadow: 0 20px 40px rgba(16, 185, 129, 0.6);
        color: white;
        text-decoration: none;
    }

    .action-btn.disabled {
        background: rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.5);
        cursor: not-allowed;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .action-btn.view-result {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    }

    .action-btn.view-result:hover {
        transform: translateY(-3px);
        box-shadow: 0 20px 40px rgba(102, 126, 234, 0.6);
        color: white;
        text-decoration: none;
    }

    /* Modern Table */
    .modern-table {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        overflow: hidden;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }

    .modern-table table {
        margin-bottom: 0;
        color: white;
    }

    .modern-table thead {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);
    }

    .modern-table th {
        border: none;
        padding: 1.5rem;
        font-weight: 700;
        color: white;
        font-size: 1rem;
    }

    .modern-table td {
        border: none;
        padding: 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.9);
    }

    .modern-table tbody tr:hover {
        background: rgba(102, 126, 234, 0.1);
    }

    /* Empty State */
    .empty-state {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border-radius: 24px;
        padding: 4rem 2rem;
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }

    .empty-state i {
        font-size: 4rem;
        color: rgba(255, 255, 255, 0.3);
        margin-bottom: 2rem;
        display: block;
    }

    .empty-state h4 {
        color: rgba(255, 255, 255, 0.8);
        font-weight: 600;
        margin-bottom: 1rem;
        font-size: 1.8rem;
    }

    .empty-state p {
        color: rgba(255, 255, 255, 0.6);
        font-size: 1.2rem;
        margin-bottom: 0;
    }

    /* History Button */
    .history-button-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 300px;
    }

    .history-btn {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 2rem 3rem;
        border-radius: 20px;
        font-size: 1.3rem;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.4s ease;
        display: inline-flex;
        align-items: center;
        gap: 1rem;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        position: relative;
        overflow: hidden;
    }

    .history-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.5s;
    }

    .history-btn:hover::before {
        left: 100%;
    }

    .history-btn:hover {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-color: #667eea;
        color: white;
        text-decoration: none;
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 30px 60px rgba(102, 126, 234, 0.4);
    }

    /* Score Display */
    .score-display {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 0.8rem 1.2rem;
        border-radius: 12px;
        font-weight: 700;
        font-size: 1.1rem;
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    /* Grid Layout */
    .exam-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
        gap: 2rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .dashboard-container {
            padding: 0 1rem;
        }
        
        .welcome-section {
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .welcome-section h2 {
            font-size: 2rem;
        }
        
        .modern-tabs {
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .modern-tab {
            min-width: auto;
        }
        
        .exam-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        .exam-meta {
            grid-template-columns: 1fr;
        }
        
        .modern-table {
            font-size: 0.9rem;
        }
        
        .modern-table th,
        .modern-table td {
            padding: 1rem;
        }
    }

    /* Loading Animation */
    .loading {
        opacity: 0;
        transform: translateY(30px);
        animation: loadIn 0.6s ease forwards;
    }

    @keyframes loadIn {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Add stagger effect */
    .modern-card:nth-child(1) { animation-delay: 0.1s; }
    .modern-card:nth-child(2) { animation-delay: 0.2s; }
    .modern-card:nth-child(3) { animation-delay: 0.3s; }
    .modern-card:nth-child(4) { animation-delay: 0.4s; }
</style>

<div class="dashboard-body">
    <!-- Floating Particles -->
    <div class="particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <div class="dashboard-container">
        <!-- Welcome Section -->
        <div class="welcome-section loading">
            <h2>
                <i class="fas fa-tachometer-alt"></i> Welcome, {{ session.full_name }}!
            </h2>
            <p>Manage your exams and view your progress with our next-generation platform</p>
        </div>

        <!-- Modern Tabs -->
        <div class="modern-tabs loading">
            <button class="modern-tab active" onclick="switchTab('upcoming')">
                <i class="fas fa-calendar-alt"></i>
                Upcoming Exams
            </button>
            <button class="modern-tab" onclick="switchTab('ongoing')">
                <i class="fas fa-play-circle"></i>
                Ongoing Exams
            </button>
            <button class="modern-tab" onclick="switchTab('completed')">
                <i class="fas fa-check-circle"></i>
                Completed Exams
            </button>
            <button class="modern-tab" onclick="switchTab('history')">
                <i class="fas fa-history"></i>
                Results History
            </button>
        </div>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Upcoming Exams -->
            <div class="tab-pane active" id="upcoming">
                {% if upcoming_exams %}
                <div class="exam-grid">
                    {% for exam in upcoming_exams %}
                    <div class="modern-card loading">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-file-alt"></i>
                                {{ exam.name }}
                                <span class="status-badge upcoming">Upcoming</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="exam-meta">
                                <div class="exam-meta-item">
                                    <i class="fas fa-calendar"></i>
                                    {{ exam.date }}
                                </div>
                                <div class="exam-meta-item">
                                    <i class="fas fa-clock"></i>
                                    {{ exam.start_time }}
                                </div>
                                <div class="exam-meta-item">
                                    <i class="fas fa-stopwatch"></i>
                                    {{ exam.duration }} mins
                                </div>
                                <div class="exam-meta-item">
                                    <i class="fas fa-question-circle"></i>
                                    {{ exam.total_questions }} questions
                                </div>
                            </div>
                            <p>{{ exam.instructions }}</p>
                        </div>
                        <div class="card-footer">
                            <button class="action-btn disabled">
                                <i class="fas fa-clock"></i>
                                Not Started Yet
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-state">
                    <i class="fas fa-calendar-times"></i>
                    <h4>No Upcoming Exams</h4>
                    <p>You don't have any upcoming exams at the moment. Stay tuned for new assessments!</p>
                </div>
                {% endif %}
            </div>

            <!-- Ongoing Exams -->
            <div class="tab-pane" id="ongoing">
                {% if ongoing_exams %}
                <div class="exam-grid">
                    {% for exam in ongoing_exams %}
                    <div class="modern-card exam-live loading">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-play-circle"></i>
                                {{ exam.name }}
                                <span class="status-badge live">LIVE</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="exam-meta">
                                <div class="exam-meta-item">
                                    <i class="fas fa-calendar"></i>
                                    {{ exam.date }}
                                </div>
                                <div class="exam-meta-item">
                                    <i class="fas fa-clock"></i>
                                    {{ exam.start_time }}
                                </div>
                                <div class="exam-meta-item">
                                    <i class="fas fa-stopwatch"></i>
                                    {{ exam.duration }} mins
                                </div>
                                <div class="exam-meta-item">
                                    <i class="fas fa-question-circle"></i>
                                    {{ exam.total_questions }} questions
                                </div>
                            </div>
                            <p>{{ exam.instructions }}</p>
                        </div>
                        <div class="card-footer">
                            <a href="{{ url_for('exam_instructions', exam_id=exam.id) }}" class="action-btn start-exam">
                                <i class="fas fa-rocket"></i>
                                Start Exam Now
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-state">
                    <i class="fas fa-play-circle"></i>
                    <h4>No Ongoing Exams</h4>
                    <p>There are no active exams at this time. Check back soon for live assessments!</p>
                </div>
                {% endif %}
            </div>

            <!-- Completed Exams -->
            <div class="tab-pane" id="completed">
                {% if completed_exams %}
                <div class="modern-table">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th><i class="fas fa-file-alt"></i> Exam Name</th>
                                <th><i class="fas fa-calendar"></i> Date</th>
                                <th><i class="fas fa-chart-bar"></i> Score</th>
                                <th><i class="fas fa-info-circle"></i> Status</th>
                                <th><i class="fas fa-eye"></i> Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for exam in completed_exams %}
                            <tr>
                                <td>
                                    <strong>{{ exam.name }}</strong>
                                </td>
                                <td>{{ exam.date }}</td>
                                <td>
                                    {% if exam.result %}
                                        <span class="score-display">{{ exam.result }}</span>
                                    {% else %}
                                        <span class="status-badge pending">Pending</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <span class="status-badge completed">
                                        <i class="fas fa-check"></i> Completed
                                    </span>
                                </td>
                                <td>
                                    <a href="{{ url_for('result', exam_id=exam.id) }}" class="action-btn view-result" style="width: auto; padding: 0.7rem 1.5rem;">
                                        <i class="fas fa-eye"></i> View Result
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="empty-state">
                    <i class="fas fa-clipboard-list"></i>
                    <h4>No Completed Exams</h4>
                    <p>You haven't completed any exams yet. Start your first assessment to see results here!</p>
                </div>
                {% endif %}
            </div>

            <!-- Results History -->
            <div class="tab-pane" id="history">
                <div class="history-button-container">
                    <a href="{{ url_for('results_history') }}" class="history-btn">
                        <i class="fas fa-sync-alt"></i>
                        Open Full Results History
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function switchTab(tabName) {
    // Remove active class from all tabs and panes
    document.querySelectorAll('.modern-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    document.querySelectorAll('.tab-pane').forEach(pane => {
        pane.classList.remove('active');
    });
    
    // Add active class to clicked tab and corresponding pane
    event.target.classList.add('active');
    document.getElementById(tabName).classList.add('active');
    
    // Add loading animation to new content
    const newContent = document.getElementById(tabName);
    const cards = newContent.querySelectorAll('.modern-card, .modern-table, .empty-state, .history-button-container');
    cards.forEach((card, index) => {
        card.style.animation = 'none';
        setTimeout(() => {
            card.style.animation = `loadIn 0.6s ease forwards`;
            card.style.animationDelay = `${index * 0.1}s`;
        }, 10);
    });
}

// Add loading animations on page load
document.addEventListener('DOMContentLoaded', function() {
    const loadingElements = document.querySelectorAll('.loading');
    loadingElements.forEach((element, index) => {
        element.style.animationDelay = `${index * 0.2}s`;
    });
    
    // Dynamic particle generation
    function createDynamicParticle() {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.width = Math.random() * 6 + 2 + 'px';
        particle.style.height = particle.style.width;
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDuration = Math.random() * 4 + 4 + 's';
        particle.style.animationDelay = Math.random() * 2 + 's';
        
        document.querySelector('.particles').appendChild(particle);
        
        setTimeout(() => {
            particle.remove();
        }, 10000);
    }

    // Generate new particles periodically
    setInterval(createDynamicParticle, 3000);
    
    // Enhanced hover effects for cards
    document.querySelectorAll('.modern-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-15px) scale(1.03)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
    
    // Smooth scroll for any anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
    
    // Add pulse effect to live badges
    setInterval(() => {
        document.querySelectorAll('.status-badge.live').forEach(badge => {
            badge.style.transform = 'scale(1.1)';
            setTimeout(() => {
                badge.style.transform = 'scale(1)';
            }, 300);
        });
    }, 3000);
    
    // Intersection Observer for scroll animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0) scale(1)';
            }
        });
    }, observerOptions);

    // Observe all cards for scroll animations
    document.querySelectorAll('.modern-card, .modern-table, .empty-state').forEach((element, index) => {
        element.style.opacity = '0';
        element.style.transform = 'translateY(30px) scale(0.95)';
        element.style.transition = `all 0.8s ease ${index * 0.1}s`;
        observer.observe(element);
    });
});

// Add keyboard navigation for tabs
document.addEventListener('keydown', function(e) {
    const tabs = document.querySelectorAll('.modern-tab');
    const activeTab = document.querySelector('.modern-tab.active');
    const currentIndex = Array.from(tabs).indexOf(activeTab);
    
    if (e.key === 'ArrowRight' && currentIndex < tabs.length - 1) {
        tabs[currentIndex + 1].click();
    } else if (e.key === 'ArrowLeft' && currentIndex > 0) {
        tabs[currentIndex - 1].click();
    }
});

// Add real-time clock for ongoing exams
function updateClock() {
    const now = new Date();
    const timeString = now.toLocaleTimeString();
    
    document.querySelectorAll('.status-badge.live').forEach(badge => {
        if (!badge.dataset.originalText) {
            badge.dataset.originalText = badge.textContent;
        }
        
        // Toggle between "LIVE" and current time every 5 seconds
        if (Math.floor(now.getSeconds() / 5) % 2 === 0) {
            badge.textContent = 'LIVE';
        } else {
            badge.textContent = timeString.substring(0, 5); // Show only HH:MM
        }
    });
}

setInterval(updateClock, 1000);

// Add success animation for completed actions
function showSuccessAnimation(element) {
    element.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
    element.style.transform = 'scale(1.1)';
    
    setTimeout(() => {
        element.style.background = '';
        element.style.transform = 'scale(1)';
    }, 500);
}

// Enhanced button click effects
document.querySelectorAll('.action-btn').forEach(btn => {
    btn.addEventListener('click', function(e) {
        if (!this.classList.contains('disabled')) {
            // Create ripple effect
            const ripple = document.createElement('span');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');
            
            this.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        }
    });
});

// Add CSS for ripple effect
const rippleCSS = `
.ripple {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.6);
    transform: scale(0);
    animation: ripple-animation 0.6s linear;
    pointer-events: none;
}

@keyframes ripple-animation {
    to {
        transform: scale(4);
        opacity: 0;
    }
}
`;

const style = document.createElement('style');
style.textContent = rippleCSS;
document.head.appendChild(style);
</script>

{% endblock %}